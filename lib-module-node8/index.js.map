{"version":3,"sources":["../src/index.js"],"names":["Logger","logger","process","SIGTERMTimeout","Promise","resolve","killTimeout","setTimeout","warn","kill","removeAllListeners","once","code","signal","info","clearTimeout"],"mappings":"AAAA,OAAOA,MAAP;;AAEA,MAAMC,SAAS,IAAID,MAAJ,CAAW,eAAX,CAAf;;AAEA,gBAAe,CAACE,OAAD,EAAUC,iBAAyB,IAAnC,KACb,IAAIC,OAAJ,CAAYC,WAAW;AACrB,QAAMC,cAAcC,WAAW,MAAM;AACnCN,WAAOO,IAAP,CAAY,6BAAZ;AACAN,YAAQO,IAAR,CAAa,SAAb;AACD,GAHmB,EAGjBN,cAHiB,CAApB;;AAKAD,UAAQQ,kBAAR;AACAR,UAAQS,IAAR,CAAa,MAAb,EAAqB,CAACC,IAAD,EAAOC,MAAP,KAAkB;AACrCZ,WAAOa,IAAP,CAAY,SAAZ,EAAuB,EAAEF,IAAF,EAAQC,MAAR,EAAvB;AACA,QAAIP,WAAJ,EAAiBS,aAAaT,WAAb;AACjBD;AACD,GAJD;AAKAH,UAAQO,IAAR;AACD,CAbD,CADF","file":"index.js","sourcesContent":["import Logger from 'nightingale-logger/src';\n\nconst logger = new Logger('graceful-kill');\n\nexport default (process, SIGTERMTimeout: number = 4000) =>\n  new Promise(resolve => {\n    const killTimeout = setTimeout(() => {\n      logger.warn('timeout: sending SIGKILL...');\n      process.kill('SIGKILL');\n    }, SIGTERMTimeout);\n\n    process.removeAllListeners();\n    process.once('exit', (code, signal) => {\n      logger.info('stopped', { code, signal });\n      if (killTimeout) clearTimeout(killTimeout);\n      resolve();\n    });\n    process.kill();\n  });\n"]}